appId: com.anonymous.engage
tags: [ios]
---
# Default Preset Task Initialization E2E Test
# Tests that default categories and tasks are properly initialized on first launch
# and that the 3 recommended tasks are suggested to new users

- launchApp:
    clearState: true

# Wait for app initialization and default preset seeding
- waitForAnimationToEnd:
    timeout: 3000

# Verify we're on Calendar screen (default) - this will wait for the app to be ready
- assertVisible:
    id: 'calendar-screen'

# Test 1: Verify default categories and tasks are initialized
# Open a day by tapping on a specific date that's guaranteed to exist
- tapOn:
    id: 'calendar-date-2025-09-15' # Mid-month date, always visible
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 3000

# Wait for day modal to appear - check for day-sheet testID instead of text
- extendedWaitUntil:
    visible:
      id: 'day-sheet'
    timeout: 10000

# Verify we're in the day modal
- assertVisible:
    id: 'day-sheet-date'

# Open task picker
- tapOn:
    id: 'task-selection-button'
- waitForAnimationToEnd

# Verify default categories exist
- assertVisible: '事業'
- assertVisible: '生活'

# Scroll to see all tasks
- scroll
- waitForAnimationToEnd

# Verify some default business tasks exist
- assertVisible: 'ネットワーキング'
- assertVisible: 'アイデア記録'

# Verify some default life tasks exist (using partial matches to be more flexible)
- assertVisible:
    text: '運動.*'
- assertVisible: '読書・勉強'
- assertVisible: '家族との時間'

# Test 2: Verify basic task selection works
# Close task picker to test core functionality
- tapOn:
    id: 'task-picker-close'
- waitForAnimationToEnd

# Close day modal
- tapOn:
    id: 'day-modal-close'
- waitForAnimationToEnd

# Test completed - default preset initialization verified
- assertVisible:
    id: 'calendar-screen'
