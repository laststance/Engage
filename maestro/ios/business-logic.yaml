appId: com.anonymous.engage
tags: [ios, business-logic]
---
# E2E Test for Business Logic and State Management
# Tests core business logic flows and state persistence

- launchApp:
    clearState: true
- waitForAnimationToEnd:
    timeout: 3000

# Test 1: Basic app initialization and data loading
- assertVisible:
    id: 'calendar-screen'

# Navigate to Today tab
- tapOn:
    point: 50%, 93% # Today tab coordinates
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Test 2: Statistics initialization
- tapOn:
    point: 83%, 93% # Stats tab
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Wait for stats screen to load
- extendedWaitUntil:
    visible:
      id: 'statistics-screen'
    timeout: 10000

# Test 3: Calendar heatmap initialization
- tapOn:
    point: 17%, 93% # Calendar tab
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

- extendedWaitUntil:
    visible:
      id: 'calendar-screen'
    timeout: 10000

# Test 4: State persistence across tab navigation
- tapOn:
    point: 50%, 93% # Back to Today
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Test 5: Statistics tab navigation
- tapOn:
    point: 83%, 93% # Stats tab
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Test 6: Calendar tab navigation
- tapOn:
    point: 17%, 93% # Calendar tab
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Final verification
- assertVisible:
    id: 'calendar-screen'
