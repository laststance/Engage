appId: com.habittracker.app
---
# E2E Test for Business Logic and State Management
# Tests core business logic flows and state persistence

- launchApp
- clearState

# Test 1: Basic app initialization and data loading
- assertVisible: 'Calendar'
- delay: 2000

# Navigate to Today tab
- tapOn:
    point: 50%, 93% # Today tab coordinates
    repeat: 2
    delay: 500

# Test 2: Task selection and state management
- assertVisible: 'Today'
- delay: 1000

# Should show task selection prompt initially
- assertVisible: 'タスクを選択'

# Test 3: Statistics initialization
- tapOn:
    point: 83%, 93% # Stats tab
    repeat: 2
    delay: 500

- assertVisible: 'Stats'
- delay: 1000

# Should show zero state initially
- assertVisible: '0' # No completions yet

# Test 4: Calendar heatmap initialization
- tapOn:
    point: 17%, 93% # Calendar tab
    repeat: 2
    delay: 500

- assertVisible: 'Calendar'
- delay: 1000

# Test 5: State persistence across tab navigation
- tapOn:
    point: 50%, 93% # Back to Today
    repeat: 2
    delay: 500

- assertVisible: 'Today'
- assertVisible: 'タスクを選択'

# Test 6: App restart and state persistence
- terminateApp
- delay: 2000
- launchApp
- delay: 3000

# Verify app loads correctly after restart
- assertVisible: 'Calendar'

# Navigate to Today tab
- tapOn:
    point: 50%, 93%
    repeat: 2
    delay: 500

# Should still show task selection (no data lost)
- assertVisible: 'タスクを選択'

# Test 7: Statistics tab after restart
- tapOn:
    point: 83%, 93% # Stats tab
    repeat: 2
    delay: 500

- assertVisible: 'Stats'
- delay: 1000

# Should still show zero state
- assertVisible: '0'

# Test 8: Calendar tab after restart
- tapOn:
    point: 17%, 93% # Calendar tab
    repeat: 2
    delay: 500

- assertVisible: 'Calendar'
- delay: 1000

# Test completed successfully
- assertVisible: 'Calendar'
