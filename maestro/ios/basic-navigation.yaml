appId: com.anonymous.engage
tags: [ios]
---
# iOS-Specific Navigation Test
# Uses coordinate-based navigation due to Expo Router testID limitations
# Platform: iOS only (coordinates optimized for iPhone simulators)
# Note: Coordinate usage violates Maestro best practices but required for Expo Router

- launchApp:
    clearState: true
- waitForAnimationToEnd:
    timeout: 2000

# Test Calendar screen is active by default
- assertVisible:
    id: 'calendar-screen'

# Multi-strategy approach for Today tab navigation
# Strategy 1: Try multiple tap positions with waits
- tapOn:
    point: 50%, 93%
    repeat: 2
    delay: 300
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 1000

# Strategy 2: If still on calendar, try longPress
- runFlow:
    when:
      visible:
        id: 'calendar-screen'
    commands:
      - longPressOn:
          point: 50%, 93%
          waitToSettleTimeoutMs: 2000
      - waitForAnimationToEnd:
          timeout: 2000

# Strategy 3: Try different Y coordinates
- runFlow:
    when:
      visible:
        id: 'calendar-screen'
    commands:
      - tapOn:
          point: 50%, 91%
          waitToSettleTimeoutMs: 1000
      - waitForAnimationToEnd:
          timeout: 1000
      - tapOn:
          point: 50%, 95%
          waitToSettleTimeoutMs: 1000
      - waitForAnimationToEnd:
          timeout: 2000

# Final check with generous timeout
- extendedWaitUntil:
    visible:
      id: 'today-screen'
    timeout: 20000

# If we reach today screen, continue with simplified test
- runFlow:
    when:
      visible:
        id: 'today-screen'
    commands:
      - assertVisible:
          id: 'today-screen'
      
      # Quick test for Stats tab
      - tapOn:
          point: 83%, 93%
          repeat: 2
          delay: 300
          waitToSettleTimeoutMs: 1000
      - waitForAnimationToEnd:
          timeout: 2000
      - extendedWaitUntil:
          visible:
            id: 'stats-screen'
          timeout: 10000
      
      # Return to Calendar  
      - tapOn:
          point: 17%, 93%
          repeat: 2
          delay: 300
          waitToSettleTimeoutMs: 1000
      - waitForAnimationToEnd:
          timeout: 2000
      - extendedWaitUntil:
          visible:
            id: 'calendar-screen'
          timeout: 10000
      - assertVisible:
          id: 'calendar-screen'
