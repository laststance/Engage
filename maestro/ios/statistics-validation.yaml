appId: com.anonymous.engage
tags: [ios, statistics]
---
# E2E Test for Statistics Calculation Validation
# This test validates that statistics are calculated correctly

- launchApp:
    clearState: true
- waitForAnimationToEnd:
    timeout: 3000

# First navigate to Today tab (following basic-navigation pattern)
- tapOn:
    point: 50%, 93% # Today tab
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Then navigate to Stats tab from Today
- tapOn:
    point: 83%, 93% # Stats tab
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Wait for stats screen to load
- extendedWaitUntil:
    visible:
      id: 'stats-screen'
    timeout: 10000

# Test weekly/monthly toggle functionality
- runFlow:
    when:
      visible:
        id: 'stats-month-toggle'
    commands:
      - tapOn:
          id: 'stats-month-toggle'
      - waitForAnimationToEnd:
          timeout: 1000
      - tapOn:
          id: 'stats-week-toggle'
      - waitForAnimationToEnd:
          timeout: 1000

# Navigate to Today tab to test navigation
- tapOn:
    point: 50%, 93% # Today tab
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Navigate back to Stats
- tapOn:
    point: 83%, 93% # Stats tab
    repeat: 2
    waitToSettleTimeoutMs: 1000
- waitForAnimationToEnd:
    timeout: 2000

# Final verification
- extendedWaitUntil:
    visible:
      id: 'stats-screen'
    timeout: 10000
